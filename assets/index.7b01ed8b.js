import{a3 as O,a8 as S,aG as b,bc as C,ai as W,a9 as u,ac as d,ab as f,ag as j,ad as k,ae as H,a5 as l,a6 as M,bn as N}from"./vendor.60e09344.js";import{b as P,E as m,F as A,g as B,Z as g}from"./App.2074c692.js";import{o as I,s}from"./dom.cd0136fc.js";import{g as L}from"./screen.c1ebd86b.js";const X="//files.pengxiaotian.com",G=O({name:"Preview",props:{screenId:{type:[String,Number],required:!0}},setup(a){const p=S(!0),i=b(()=>m.pageConfig),v=b(()=>m.coms),y=b(()=>{const e=i.value.styleFilterParams;let o="";return e.enable&&(o=`hue-rotate(${e.hue}deg) contrast(${e.contrast}%) opacity(${e.opacity}%) saturate(${e.saturate}%) brightness(${e.brightness}%)`),o}),$=(e,o)=>{const r=document.documentElement.clientWidth,h=document.documentElement.clientHeight,n=r/e,c=h/o;s(document.body,{transform:`scale(${n}, ${c})`,transformOrigin:"left top",backgroundSize:"100% 100%"})},t=e=>{const o=document.documentElement.clientWidth/e;s(document.body,{transform:`scale(${o})`,transformOrigin:"left top",backgroundSize:"100%"})},_=(e,o)=>{const r=document.documentElement.clientWidth,n=document.documentElement.clientHeight/o,c=(r-e*n)/2;s(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:`${e/r*n*100}% 100%`,backgroundPosition:`${c.toFixed(3)}px top`,marginLeft:`${c.toFixed(3)}px`})},E=(e,o)=>{const r=document.documentElement.clientWidth,n=document.documentElement.clientHeight/o,c=(r-e*n)/2;s(document.body,{transform:`scale(${n})`,transformOrigin:"left top",backgroundSize:`${e/r*n*100}% 100%`,backgroundPosition:`${c.toFixed(3)}px top`}),document.documentElement.style.overflowX="scroll"},F=()=>{s(document.body,{overflow:"hidden",position:"relative"})},w=e=>{switch(e.zoomMode){case g.auto:$(e.width,e.height);break;case g.width:t(e.width);break;case g.height:_(e.width,e.height);break;case g.full:E(e.width,e.height);break;default:F();break}},x=e=>{document.title=m.screen.name,document.querySelector('meta[name="viewport"]').setAttribute("content",`width=${e.width}`),s(document.documentElement,{overflowX:"hidden",overflowY:"visible"}),s(document.body,{width:`${e.width}px`,height:`${e.height}px`,backgroundImage:`url(${i.value.bgimage})`,backgroundColor:i.value.bgcolor}),w(e)},z=C();return W(async()=>{try{const e=await L(+a.screenId);if(e)m.setEditorOption({screen:e.screen,config:e.config,coms:e.coms,variables:e.variables}),x(e.config),A.setFilterOption({dataFilters:e.dataFilters}),setTimeout(()=>{p.value=!1},500),I(window,"resize",()=>{w(i.value)});else throw new Error("404")}catch{z.replace({name:"NotFound",params:{catchAll:"error"}})}}),{cdn:X,LOGO:B.logo,loading:p,pageConfig:i,coms:v,styleFilter:y}}}),V={target:"_blank",href:"javascript:;"},Y=["src"],q={key:0,href:"/",target:"_blank",class:"datav-watermark"},Z=["src"],D={class:"scene"};function R(a,p,i,v,y,$){return l(),u(k,null,[d("div",{id:"datav-loading",style:f({background:"rgb(15, 42, 66)",display:a.loading?"block":"none"})},[d("a",V,[d("img",{class:"datav-logo",src:`${a.cdn}/datav/datav-loading.gif`},null,8,Y)])],4),d("div",{class:"datav-layout",style:f({visibility:a.loading?"hidden":"visible"})},[a.pageConfig.useWatermark?(l(),u("a",q,[d("img",{src:a.LOGO},null,8,Z)])):j("",!0),d("div",D,[(l(!0),u(k,null,H(a.coms,t=>(l(),u("div",{key:t.id,style:f({left:t.attr.x+"px",top:t.attr.y+"px",width:t.attr.w+"px",height:t.attr.h+"px",opacity:t.attr.opacity,transform:`rotate(${t.attr.deg}deg) ${t.attr.filpH?"scaleX(-1)":""} ${t.attr.filpV?"scaleY(-1)":""}`,filter:a.styleFilter}),class:"-datav-com absolute"},[(l(),M(N(t.name),{com:t},null,8,["com"]))],4))),128))])],4)],64)}var U=P(G,[["render",R]]);export{U as default};
